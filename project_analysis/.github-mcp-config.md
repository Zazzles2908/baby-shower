# GitHub MCP Configuration

This document describes the GitHub MCP (Model Context Protocol) server configuration for automated repository operations.

## MCP Server Connection

The GitHub MCP server is configured via Docker:

```bash
docker run -i --rm \
  -e GITHUB_PERSONAL_ACCESS_TOKEN \
  -e GITHUB_TOOLSETS \
  -e GITHUB_READ_ONLY \
  ghcr.io/github/github-mcp-server
```

## Available Tools

### Repository Operations

| Tool | Description | Parameters |
|------|-------------|------------|
| `get_me` | Get authenticated user info | None |
| `get_file_contents` | Get file/directory contents | `owner`, `repo`, `path`, `ref` |
| `create_or_update_file` | Create or update file | `owner`, `repo`, `path`, `content`, `message`, `branch`, `sha` |
| `push_files` | Push multiple files in single commit | `owner`, `repo`, `branch`, `files`, `message` |
| `delete_file` | Delete file from repo | `owner`, `repo`, `path`, `message`, `branch` |

### Branch Operations

| Tool | Description | Parameters |
|------|-------------|------------|
| `list_branches` | List repository branches | `owner`, `repo` |
| `create_branch` | Create new branch | `owner`, `repo`, `branch`, `from_branch` |

### Commit Operations

| Tool | Description | Parameters |
|------|-------------|------------|
| `list_commits` | List commits on branch | `owner`, `repo`, `sha`, `author` |
| `get_commit` | Get commit details | `owner`, `repo`, `sha`, `include_diff` |

### Pull Request Operations

| Tool | Description | Parameters |
|------|-------------|------------|
| `list_pull_requests` | List PRs | `owner`, `repo`, `state`, `base` |
| `create_pull_request` | Create PR | `owner`, `repo`, `title`, `head`, `base`, `body` |
| `pull_request_review_write` | Review PR | `owner`, `repo`, `pullNumber`, `method`, `event` |
| `merge_pull_request` | Merge PR | `owner`, `repo`, `pullNumber`, `merge_method` |

### Search Operations

| Tool | Description | Parameters |
|------|-------------|------------|
| `search_code` | Search code across repos | `query` |
| `search_repositories` | Search repositories | `query` |
| `search_issues` | Search issues | `query` |
| `search_pull_requests` | Search PRs | `query` |

## Usage Examples

### Check Repository Status

```javascript
// Get authenticated user
mcp_github_get_me()

// List branches
mcp_github_list_branches({ owner: "your-org", repo: "baby-shower" })

// List recent commits
mcp_github_list_commits({ owner: "your-org", repo: "baby-shower", sha: "main" })
```

### Push Files

```javascript
mcp_github_push_files({
  owner: "your-org",
  repo: "baby-shower",
  branch: "main",
  message: "feat(scripts): update voting functionality",
  files: [
    {
      path: "scripts/voting.js",
      content: "// Updated voting code..."
    }
  ]
})
```

### Create Commit via Git MCP Tools

For automated commits, use the npm script:

```bash
npm run commit  # Stages and commits with conventional message
npm run push    # Pushes to trigger Vercel deployment
npm run deploy  # Full deploy (commit + push)
```

## Environment Variables

| Variable | Description |
|----------|-------------|
| `GITHUB_PERSONAL_ACCESS_TOKEN` | GitHub PAT with `repo` scope |
| `GITHUB_TOOLSETS` | Toolset configuration (optional) |
| `GITHUB_READ_ONLY` | Set to "true" for read-only mode (optional) |

## Troubleshooting

### Authentication Errors

1. Verify `GITHUB_PERSONAL_ACCESS_TOKEN` is set
2. Check token has correct permissions (`repo` scope)
3. Ensure token hasn't expired

### Rate Limiting

GitHub API rate limits apply. For unauthenticated requests: 60/hour. Authenticated: 5,000/hour.

### Repository Not Found

1. Verify `owner` and `repo` names are correct
2. Check repository exists and is accessible
3. Ensure token has access to the repository

## Integration with Vercel

1. Push to `main` branch triggers Vercel deployment
2. Vercel automatically detects the push via GitHub webhook
3. Check Vercel dashboard for deployment status
4. Deployment URL: `https://baby-shower-qr-app.vercel.app`
