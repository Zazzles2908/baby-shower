{
  "timestamp": "2026-01-03T13:26:10.217Z",
  "baseUrl": "https://bkszmvfsfgvdwzacgmfz.supabase.co/functions/v1/",
  "sessionCode": "UYT3FA",
  "adminPin": "8461",
  "tests": [
    {
      "name": "Create new game session",
      "passed": true,
      "timestamp": "2026-01-03T13:26:16.461Z",
      "details": {
        "session_id": "d6aca382-7e9a-4853-a85a-2eef503e011e",
        "session_code": "UYT3FA",
        "admin_code": "8461",
        "mom_name": "Test Mom",
        "dad_name": "Test Dad",
        "status": "setup",
        "current_round": 0,
        "total_rounds": 3,
        "created_at": "2026-01-03T13:26:16.098Z"
      },
      "error": null
    },
    {
      "name": "Get existing session by code",
      "passed": true,
      "timestamp": "2026-01-03T13:26:18.814Z",
      "details": {
        "session_id": "729ae212-5ddf-4333-83f3-03103a30d368",
        "session_code": "XCWFHJ",
        "mom_name": "Emma",
        "dad_name": "Oliver",
        "status": "voting",
        "current_round": 0,
        "total_rounds": 3,
        "created_at": "2026-01-03T10:04:14.834Z"
      },
      "error": null
    },
    {
      "name": "Join session as guest",
      "passed": true,
      "timestamp": "2026-01-03T13:26:21.125Z",
      "details": {
        "session_code": "UYT3FA",
        "mom_name": "Test Mom",
        "dad_name": "Test Dad",
        "status": "setup",
        "current_round": 0,
        "total_rounds": 3
      },
      "error": null
    },
    {
      "name": "Update session status to voting",
      "passed": true,
      "timestamp": "2026-01-03T13:26:23.632Z",
      "details": {
        "session_code": "UYT3FA",
        "status": "voting",
        "current_round": 0,
        "total_rounds": 3
      },
      "error": null
    },
    {
      "name": "Reject missing mom name",
      "passed": true,
      "timestamp": "2026-01-03T13:26:25.734Z",
      "details": [
        "Mom name is required"
      ],
      "error": null
    },
    {
      "name": "Reject invalid session code",
      "passed": true,
      "timestamp": "2026-01-03T13:26:27.845Z",
      "details": [
        "Session code must be 6 characters"
      ],
      "error": null
    },
    {
      "name": "Generate new scenario",
      "passed": true,
      "timestamp": "2026-01-03T13:26:33.268Z",
      "details": {
        "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
        "scenario_text": "It's 3 AM and the baby has a dirty diaper that requires immediate attention.",
        "mom_option": "Test Mom would handle it with grace",
        "dad_option": "Test Dad would figure it out",
        "intensity": "0.50"
      },
      "error": null
    },
    {
      "name": "Get current scenario",
      "passed": true,
      "timestamp": "2026-01-03T13:26:35.598Z",
      "details": {
        "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
        "scenario_text": "It's 3 AM and the baby has a dirty diaper that requires immediate attention.",
        "mom_option": "Test Mom would handle it with grace",
        "dad_option": "Test Dad would figure it out",
        "intensity": "0.50",
        "created_at": "2026-01-03T13:26:32.904Z"
      },
      "error": null
    },
    {
      "name": "Reject missing session_id",
      "passed": true,
      "timestamp": "2026-01-03T13:26:37.708Z",
      "details": [
        "session_id is required"
      ],
      "error": null
    },
    {
      "name": "Reject invalid theme",
      "passed": true,
      "timestamp": "2026-01-03T13:26:39.897Z",
      "details": [
        "theme must be one of: general, farm, funny, sleep, feeding, messy, emotional"
      ],
      "error": null
    },
    {
      "name": "Submit vote for mom",
      "passed": true,
      "timestamp": "2026-01-03T13:26:43.713Z",
      "details": {
        "vote_counts": {
          "mom_votes": 1,
          "dad_votes": 0,
          "mom_pct": 100,
          "dad_pct": 0,
          "total_votes": 1
        },
        "your_vote": {
          "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
          "guest_name": "Guest 1",
          "choice": "mom"
        }
      },
      "error": null
    },
    {
      "name": "Submit vote for dad",
      "passed": true,
      "timestamp": "2026-01-03T13:26:46.923Z",
      "details": {
        "vote_counts": {
          "mom_votes": 1,
          "dad_votes": 1,
          "mom_pct": 50,
          "dad_pct": 50,
          "total_votes": 2
        },
        "your_vote": {
          "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
          "guest_name": "Guest 2",
          "choice": "dad"
        }
      },
      "error": null
    },
    {
      "name": "Submit additional vote for mom",
      "passed": true,
      "timestamp": "2026-01-03T13:26:50.070Z",
      "details": {
        "vote_counts": {
          "mom_votes": 2,
          "dad_votes": 1,
          "mom_pct": 67,
          "dad_pct": 33,
          "total_votes": 3
        },
        "your_vote": {
          "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
          "guest_name": "Guest 3",
          "choice": "mom"
        }
      },
      "error": null
    },
    {
      "name": "Get vote counts",
      "passed": true,
      "timestamp": "2026-01-03T13:26:52.570Z",
      "details": {
        "mom_votes": 2,
        "dad_votes": 1,
        "mom_pct": 67,
        "dad_pct": 33,
        "total_votes": 3
      },
      "error": null
    },
    {
      "name": "Update existing vote",
      "passed": true,
      "timestamp": "2026-01-03T13:26:55.696Z",
      "details": {
        "vote_counts": {
          "mom_votes": 1,
          "dad_votes": 2,
          "mom_pct": 33,
          "dad_pct": 67,
          "total_votes": 3
        },
        "your_vote": {
          "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
          "guest_name": "Guest 1",
          "choice": "dad"
        }
      },
      "error": null
    },
    {
      "name": "Reject invalid vote choice",
      "passed": true,
      "timestamp": "2026-01-03T13:26:57.884Z",
      "details": [
        "vote_choice must be \"mom\" or \"dad\""
      ],
      "error": null
    },
    {
      "name": "Reject missing scenario_id",
      "passed": true,
      "timestamp": "2026-01-03T13:26:59.991Z",
      "details": "Provide either vote data (scenario_id, guest_name, vote_choice) or lock data (scenario_id, parent, answer, admin_code)",
      "error": null
    },
    {
      "name": "Lock mom's answer",
      "passed": true,
      "timestamp": "2026-01-03T13:27:03.558Z",
      "details": {
        "locked": true,
        "both_locked": false,
        "mom_locked": true,
        "dad_locked": false,
        "mom_answer": "mom",
        "dad_answer": null
      },
      "error": null
    },
    {
      "name": "Lock dad's answer",
      "passed": true,
      "timestamp": "2026-01-03T13:27:06.420Z",
      "details": {
        "locked": true,
        "both_locked": true,
        "mom_locked": true,
        "dad_locked": true,
        "mom_answer": "mom",
        "dad_answer": "dad"
      },
      "error": null
    },
    {
      "name": "Reject invalid admin PIN",
      "passed": true,
      "timestamp": "2026-01-03T13:27:08.971Z",
      "details": "Invalid admin PIN",
      "error": null
    },
    {
      "name": "Reject invalid parent",
      "passed": true,
      "timestamp": "2026-01-03T13:27:11.335Z",
      "details": [
        "parent must be \"mom\" or \"dad\""
      ],
      "error": null
    },
    {
      "name": "Get reveal status",
      "passed": true,
      "timestamp": "2026-01-03T13:27:14.808Z",
      "details": {
        "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
        "is_revealed": false,
        "both_parents_locked": true,
        "session_status": "voting",
        "scenario": {
          "text": "It's 3 AM and the baby has a dirty diaper that requires immediate attention.",
          "mom_option": "Test Mom would handle it with grace",
          "dad_option": "Test Dad would figure it out"
        },
        "parents": {
          "mom_name": "Test Mom",
          "dad_name": "Test Dad"
        },
        "result": null
      },
      "error": null
    },
    {
      "name": "Trigger reveal",
      "passed": true,
      "timestamp": "2026-01-03T13:27:19.651Z",
      "details": {
        "roast_commentary": "ðŸ¤” Hmm, 67% picked wrong! Test Mom had other plans!",
        "perception_gap": 34,
        "vote_comparison": {
          "mom_votes": 1,
          "dad_votes": 2,
          "mom_percentage": 33,
          "dad_percentage": 67,
          "total_votes": 3,
          "crowd_choice": "dad",
          "actual_choice": "mom"
        },
        "particle_effect": "confetti",
        "result_id": "72799fd3-0f43-480f-bc87-0ce6b9844cb6",
        "scenario_info": {
          "text": "It's 3 AM and the baby has a dirty diaper that requires immediate attention.",
          "mom_option": "Test Mom would handle it with grace",
          "dad_option": "Test Dad would figure it out"
        },
        "round_info": {
          "current_round": 1,
          "total_rounds": 3
        }
      },
      "error": null
    },
    {
      "name": "Reject double reveal",
      "passed": true,
      "timestamp": "2026-01-03T13:27:22.233Z",
      "details": "Cannot trigger reveal - voting is not active",
      "error": null
    },
    {
      "name": "Reject missing scenario_id",
      "passed": true,
      "timestamp": "2026-01-03T13:27:24.381Z",
      "details": [
        "scenario_id is required"
      ],
      "error": null
    },
    {
      "name": "Reject invalid admin PIN for reveal",
      "passed": true,
      "timestamp": "2026-01-03T13:27:26.936Z",
      "details": "Invalid admin PIN",
      "error": null
    },
    {
      "name": "Handle invalid JSON",
      "passed": true,
      "timestamp": "2026-01-03T13:27:29.542Z",
      "details": 500,
      "error": null
    },
    {
      "name": "Reject GET on POST-only endpoint",
      "passed": false,
      "timestamp": "2026-01-03T13:27:31.653Z",
      "details": 400,
      "error": null
    },
    {
      "name": "Handle missing content type",
      "passed": true,
      "timestamp": "2026-01-03T13:27:33.819Z",
      "details": 400,
      "error": null
    },
    {
      "name": "Timeout handling works",
      "passed": true,
      "timestamp": "2026-01-03T13:27:34.832Z",
      "details": null,
      "error": null
    }
  ],
  "summary": {
    "total": 30,
    "passed": 29,
    "failed": 1,
    "skipped": 0
  },
  "sessionData": {
    "sessionId": "d6aca382-7e9a-4853-a85a-2eef503e011e",
    "momName": "Test Mom",
    "dadName": "Test Dad",
    "scenarios": [
      {
        "scenario_id": "66ecdad3-1b72-4155-841c-4312c1b86bc8",
        "scenario_text": "It's 3 AM and the baby has a dirty diaper that requires immediate attention.",
        "mom_option": "Test Mom would handle it with grace",
        "dad_option": "Test Dad would figure it out",
        "intensity": "0.50"
      }
    ]
  }
}